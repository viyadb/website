



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="In-Memory Analytical Database">
      
      
        <link rel="canonical" href="https://viyadb.com/samples/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/favicon.png">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.3">
    
    
      
        <title>Examples - ViyaDB</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.8d40d89b.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.6079476c.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="cyan">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#samples" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://viyadb.com" title="ViyaDB" class="md-header-nav__button md-logo">
          
            <img src="../img/logo.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                ViyaDB
              </span>
              <span class="md-header-nav__topic">
                Examples
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/viyadb/viyadb" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      viyadb/viyadb
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../img/logo.svg" width="48" height="48">
      
    </span>
    ViyaDB
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/viyadb/viyadb" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      viyadb/viyadb
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../usage/" title="Core Usage" class="md-nav__link">
      Core Usage
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../clustering/" title="Setting Up a Cluster" class="md-nav__link">
      Setting Up a Cluster
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../realtime/" title="Real-time Analytics" class="md-nav__link">
      Real-time Analytics
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Examples
      </label>
    
    <a href="./" title="Examples" class="md-nav__link md-nav__link--active">
      Examples
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#running" title="Running" class="md-nav__link">
    Running
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mobile-attribution-tracking" title="Mobile Attribution Tracking" class="md-nav__link">
    Mobile Attribution Tracking
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#starting-viyadb" title="Starting ViyaDB" class="md-nav__link">
    Starting ViyaDB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generating-sample-data" title="Generating Sample Data" class="md-nav__link">
    Generating Sample Data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-data" title="Loading Data" class="md-nav__link">
    Loading Data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querying" title="Querying" class="md-nav__link">
    Querying
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#running" title="Running" class="md-nav__link">
    Running
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mobile-attribution-tracking" title="Mobile Attribution Tracking" class="md-nav__link">
    Mobile Attribution Tracking
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#starting-viyadb" title="Starting ViyaDB" class="md-nav__link">
    Starting ViyaDB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generating-sample-data" title="Generating Sample Data" class="md-nav__link">
    Generating Sample Data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-data" title="Loading Data" class="md-nav__link">
    Loading Data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#querying" title="Querying" class="md-nav__link">
    Querying
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="samples">Samples<a class="headerlink" href="#samples" title="Permanent link">&para;</a></h1>
<p>The following section contains several examples that cover most of the ViyaDB features using
single database instance.</p>
<h2 id="running">Running<a class="headerlink" href="#running" title="Permanent link">&para;</a></h2>
<p>It's recommended to use Docker image of ViyaDB for running the samples.
To launch Docker container with latest ViyaDB version, run:</p>
<div class="codehilite"><pre><span></span>docker run -p <span class="m">5000</span>:5000 --rm -ti <span class="se">\</span>
  -v /tmp/viyadb:/tmp/viyadb viyadb/viyadb:latest
</pre></div>


<h2 id="mobile-attribution-tracking">Mobile Attribution Tracking<a class="headerlink" href="#mobile-attribution-tracking" title="Permanent link">&para;</a></h2>
<p>Mobile attribution tracking is a powerful marketing tool that allows measuring productivity of users, advertisement campaigns, etc.
The biggest question that tools like this can answer is where has advertiser's money gone, and how to optimize future campaigns.</p>
<p>How does this work? Mobile application generates events upon user action, and delivers them to a server, where these events are
being joined to the attribution data received from an ad network and different partners. Finally, the data is analyzed based on
a date an application was installed. What we need to know for the sake of example is that we have events of the following types:</p>
<ul>
<li>Click (clicking on an advertisement)</li>
<li>Impression (viewing an advertisement)</li>
<li>Install (installing an application)</li>
<li>In-App Event (custom in-app event generated by an application)</li>
<li>Launch (application was launched)</li>
<li>Uninstall (application was removed from a mobile phone)</li>
</ul>
<p>In case of click and impression events, install date actually means click/impression date.</p>
<h3 id="starting-viyadb">Starting ViyaDB<a class="headerlink" href="#starting-viyadb" title="Permanent link">&para;</a></h3>
<p>Create <code>table.json</code> file containing:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;activity&quot;</span><span class="p">,</span>
  <span class="nt">&quot;dimensions&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;app_id&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;user_id&quot;</span><span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;event_time&quot;</span><span class="p">,</span> <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;time&quot;</span><span class="p">,</span>
      <span class="nt">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;millis&quot;</span><span class="p">,</span> <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;day&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;country&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;city&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;device_type&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;device_vendor&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;ad_network&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;campaign&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;site_id&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;event_type&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;event_name&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;organic&quot;</span><span class="p">,</span> <span class="nt">&quot;cardinality&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;days_from_install&quot;</span><span class="p">,</span> <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ushort&quot;</span><span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;revenue&quot;</span> <span class="p">,</span> <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;double_sum&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;users&quot;</span><span class="p">,</span> <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bitset&quot;</span><span class="p">,</span> <span class="nt">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;user_id&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;count&quot;</span> <span class="p">,</span> <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;count&quot;</span><span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<p>Create the table by running:</p>
<div class="codehilite"><pre><span></span>curl -d @table.json http://localhost:5000/tables 
</pre></div>


<h3 id="generating-sample-data">Generating Sample Data<a class="headerlink" href="#generating-sample-data" title="Permanent link">&para;</a></h3>
<p>To generate 100M user activity events, run the following:</p>
<div class="codehilite"><pre><span></span>mkdir /tmp/viyadb
docker run --log-driver<span class="o">=</span>none --rm -ti -e <span class="nv">EVENTS_NUMBER</span><span class="o">=</span><span class="m">10000000</span> <span class="se">\</span>
  -e <span class="nv">OUTPUT_FORMAT</span><span class="o">=</span>tsv viyadb/events-generator:latest &gt; /tmp/viyadb/data.tsv
</pre></div>


<p>This might take several minutes.</p>
<h3 id="loading-data">Loading Data<a class="headerlink" href="#loading-data" title="Permanent link">&para;</a></h3>
<p>Create load descriptor as follows:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;table&quot;</span><span class="p">:</span> <span class="s2">&quot;activity&quot;</span><span class="p">,</span>
  <span class="nt">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;tsv&quot;</span><span class="p">,</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>
  <span class="nt">&quot;columns&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;app_id&quot;</span><span class="p">,</span> <span class="s2">&quot;user_id&quot;</span><span class="p">,</span> <span class="s2">&quot;event_time&quot;</span><span class="p">,</span> <span class="s2">&quot;country&quot;</span><span class="p">,</span> <span class="s2">&quot;city&quot;</span><span class="p">,</span>
    <span class="s2">&quot;device_type&quot;</span><span class="p">,</span> <span class="s2">&quot;device_vendor&quot;</span><span class="p">,</span> <span class="s2">&quot;ad_network&quot;</span><span class="p">,</span> <span class="s2">&quot;campaign&quot;</span><span class="p">,</span>
    <span class="s2">&quot;site_id&quot;</span><span class="p">,</span> <span class="s2">&quot;event_type&quot;</span><span class="p">,</span> <span class="s2">&quot;event_name&quot;</span><span class="p">,</span> <span class="s2">&quot;organic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;days_from_install&quot;</span><span class="p">,</span> <span class="s2">&quot;revenue&quot;</span>
  <span class="p">],</span>
  <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;/tmp/viyadb/data.tsv&quot;</span>
<span class="p">}</span>
</pre></div>


<p>Load the data by running:</p>
<div class="codehilite"><pre><span></span>curl -d @load.json http://localhost:5000/load
</pre></div>


<h3 id="querying">Querying<a class="headerlink" href="#querying" title="Permanent link">&para;</a></h3>
<p>The following query finds top 10 applications by organic installs count:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;aggregate&quot;</span><span class="p">,</span>
  <span class="nt">&quot;table&quot;</span><span class="p">:</span> <span class="s2">&quot;activity&quot;</span><span class="p">,</span>
  <span class="nt">&quot;select&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="nt">&quot;column&quot;</span><span class="p">:</span> <span class="s2">&quot;app_id&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;column&quot;</span><span class="p">:</span> <span class="s2">&quot;count&quot;</span><span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;filter&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;op&quot;</span><span class="p">:</span> <span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="nt">&quot;filters&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="nt">&quot;op&quot;</span><span class="p">:</span> <span class="s2">&quot;ge&quot;</span><span class="p">,</span> <span class="nt">&quot;column&quot;</span><span class="p">:</span> <span class="s2">&quot;event_time&quot;</span><span class="p">,</span> <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-01-01&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;op&quot;</span><span class="p">:</span> <span class="s2">&quot;le&quot;</span><span class="p">,</span> <span class="nt">&quot;column&quot;</span><span class="p">:</span> <span class="s2">&quot;event_time&quot;</span><span class="p">,</span> <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-01-30&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;op&quot;</span><span class="p">:</span> <span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="nt">&quot;column&quot;</span><span class="p">:</span> <span class="s2">&quot;event_type&quot;</span><span class="p">,</span> <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;install&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;op&quot;</span><span class="p">:</span> <span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="nt">&quot;column&quot;</span><span class="p">:</span> <span class="s2">&quot;organic&quot;</span><span class="p">,</span> <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;True&quot;</span><span class="p">}</span>
  <span class="p">]},</span>
  <span class="nt">&quot;sort&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="nt">&quot;column&quot;</span><span class="p">:</span> <span class="s2">&quot;count&quot;</span><span class="p">}],</span>
  <span class="nt">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">}</span>
</pre></div>


<p>Save the query in file <code>query.json</code>, and run:</p>
<div class="codehilite"><pre><span></span>curl -d @query.json http://localhost:5000/query
</pre></div>


<p>The query can be invoked using experimental SQL support. To enter SQL interpreter shell, please run:</p>
<div class="codehilite"><pre><span></span>docker <span class="nb">exec</span> -ti <span class="se">\</span>
  <span class="k">$(</span>docker ps <span class="p">|</span> grep viyadb/viyadb:latest <span class="p">|</span> awk <span class="s1">&#39;{print $1}&#39;</span><span class="k">)</span> <span class="se">\</span>
  /opt/viyadb/bin/vsql
</pre></div>


<p>Our previous query translates into SQL as follows:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span>
  <span class="n">app_id</span><span class="p">,</span> <span class="k">count</span>
<span class="k">FROM</span>
  <span class="n">activity</span>
<span class="k">WHERE</span>
  <span class="n">event_time</span> <span class="o">&gt;=</span> <span class="s1">&#39;2015-01-01&#39;</span> <span class="k">AND</span>
  <span class="n">event_time</span> <span class="o">&lt;=</span> <span class="s1">&#39;2015-01-30&#39;</span> <span class="k">AND</span>
  <span class="n">event_type</span><span class="o">=</span><span class="s1">&#39;install&#39;</span> <span class="k">AND</span>
  <span class="n">organic</span><span class="o">=</span><span class="s1">&#39;True&#39;</span>
<span class="k">ORDER</span> <span class="k">BY</span>
  <span class="k">count</span> <span class="k">DESC</span>
<span class="k">LIMIT</span> <span class="mi">10</span>
</pre></div>


<p>Let's run the query:</p>
<div class="codehilite"><pre><span></span>ViyaDB&gt; SELECT app_id, count FROM activity WHERE event_time &gt;<span class="o">=</span> <span class="s1">&#39;2015-01-01&#39;</span> AND event_time &lt;<span class="o">=</span> <span class="s1">&#39;2015-01-30&#39;</span> AND <span class="nv">event_type</span><span class="o">=</span><span class="s1">&#39;install&#39;</span> AND <span class="nv">organic</span><span class="o">=</span><span class="s1">&#39;True&#39;</span> ORDER BY count DESC LIMIT <span class="m">10</span>

app_id                                 count
------                                 -----
com.skype.raider                       <span class="m">282</span>
com.facebook.orca                      <span class="m">42</span>
net.cleverbit.VegeFruits               <span class="m">41</span>
com.virgil.basketball                  <span class="m">27</span>
com.abzorbagames.poker                 <span class="m">21</span>
air.nn.mobile.app.main                 <span class="m">18</span>
com.squareup                           <span class="m">17</span>
freemoviesapp.com                      <span class="m">16</span>
com.ea.spymouse_row                    <span class="m">14</span>
com.bandainamcoent.tamagothiclassicus  <span class="m">14</span>

Time taken: <span class="m">0</span>.004841 secs
</pre></div>


<p>For more example on this dataset please refer to the Blog post: <a href="https://medium.com/viyadb/analyzing-mobile-users-activity-with-viyadb-c88a02104269">Analyzing Mobile Users Activity with ViyaDB</a>.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../realtime/" title="Real-time Analytics" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Real-time Analytics
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.b438e6c5.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:".."}})</script>
      
        <script src="../js/extra.js"></script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-23508932-8","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>